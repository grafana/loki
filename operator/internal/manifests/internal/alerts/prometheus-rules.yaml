---
groups:
- name: logging_loki.rules
  rules:
  - record: job_namespace_route:loki_request_duration_seconds_count:rate1m
    expr: |
      sum by (job, namespace, route) (rate(loki_request_duration_seconds_count[1m]))
  - record: namespace_operation:loki_boltdb_shipper_request_duration_seconds_bucket:rate5m
    expr: |
      sum by (le, namespace, operation) (rate(loki_boltdb_shipper_request_duration_seconds_bucket[5m]))
  - record: namespace_operation:loki_boltdb_shipper_request_duration_seconds_rate5m:99quantile
    expr: |
      histogram_quantile(.99, namespace_operation:loki_boltdb_shipper_request_duration_seconds_bucket:rate5m)
