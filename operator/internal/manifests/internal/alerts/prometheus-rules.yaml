---
groups:
- name: logging_loki.rules
  rules:
  - record: namespace_job_route:loki_request_duration_seconds_count:rate1m
    expr: |
      sum by (namespace, job, route) (rate(loki_request_duration_seconds_count[1m]))
  - record: namespace_operation:loki_boltdb_shipper_request_duration_seconds:99quantile
    expr: |
      histogram_quantile(.99,
        sum(
          rate(
            loki_boltdb_shipper_request_duration_seconds_bucket[5m]
          )
        ) by (le, namespace, operation)
      )
