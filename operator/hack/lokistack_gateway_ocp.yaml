apiVersion: loki.grafana.com/v1
kind: LokiStack
metadata:
  name: lokistack-dev
  namespace: openshift-logging
spec:
  limits:
    tenants:
      application:
        queries:
          blocked:
          - pattern: '.*log-test.*'
            regex: true
            types:
            - metric
          - pattern: '.*log-test-0.*'
            regex: true
            types:
            - filter
      audit:
        queries:
          blocked:
          - pattern: '.*audit.*'
            regex: true
            types:
            - limited
      infrastructure:
        queries:
          blocked:
            - pattern: '.*api-server.*'
              regex: true
              types:
              - filter
              - limited
  size: 1x.extra-small
  storage:
    schemas:
    - version: v12
      effectiveDate: 2022-06-01
    secret:
      name: test
      type: s3
  storageClassName: gp3-csi
  tenants:
    mode: openshift-logging
  rules:
    enabled: true
    selector:
      matchLabels:
        openshift.io/cluster-monitoring: "true"
    namespaceSelector:
      matchLabels:
        openshift.io/cluster-monitoring: "true"
