---
title: v3.6
description: Version 3.6 release notes.
weight: 250
---

# v3.6

Grafana Labs and the Loki team are excited to announce the release of Loki 3.6. Here's a summary of new enhancements and important fixes.

For a full list of all changes and fixes, refer to the [CHANGELOG](https://github.com/grafana/loki/blob/release-3.6.x/CHANGELOG.md).

## Features and enhancements

Key features in Loki 3.6.0 include the following:

* **Horizontally scalable compactor:** The Compactor in Loki is a singleton service that compacts the index and applies retention, including processing delete requests. Because it can only be scaled vertically, it limits how many resources you can add to speed things up when the workload increases in bigger cells. This release adds a horizontally scalable compactor, to speed up processing large delete requests or catching up if there has been a lag in processing for some reason.

* **meta-monitoring:** Moves the meta-monitoring responsibilities from the [Grafana meta-monitoring Helm chart](https://github.com/grafana/meta-monitoring-chart) to the widely supported [Grafana Kubernetes Monitoring Helm chart](https://github.com/grafana/k8s-monitoring-helm). Meta Monitoring Loki v2 (Part 1) - Telemetry Collection ([#16665](https://github.com/grafana/loki/issues/16665)) ([2d0bbfd](https://github.com/grafana/loki/commit/2d0bbfd70b612e2b62615ba19a0bd8e756aaca88)). Meta Monitoring Loki v2 (Part 2) - Loki Mixin's ([#16962](https://github.com/grafana/loki/issues/16962)) ([93360f6](https://github.com/grafana/loki/commit/93360f6da138b4a63282c87e45567b36117f5f13)).

* **Helm charts:** The Grafana Developer Advocates launched a pilot Community Helm Maintainers group at the end of June made up of Grafana Champions who expressed interest in helping maintain the Loki Helm chart. We have resumed regular releases of the Loki Helm chart and reduced the backlog of open Loki Helm chart pull requests from around 150 to less than 40. For information about recent changes, refer to the Helm chart [CHANGELOG](https://github.com/grafana/loki/blob/main/production/helm/loki/CHANGELOG.md).

* **UI:**  Move the Loki UI to a Grafana Plugin. The static Operational UI is not going away, and all the APIs that serve it will remain in Loki. The Javascript that serves the UI, however, has been moved to the [Loki Operational UI](https://github.com/grafana/loki-operational-ui) Grafana plugin ([#19390](https://github.com/grafana/loki/issues/19390)).

* **Docs:** Published a third Cloud Deployment Guide, this one for [Google Cloud Platform](https://grafana.com/docs/loki/latest/setup/install/helm/deployment-guides/gcp/) [#17503](https://github.com/grafana/loki/pull/17503 ). Added links to three log related [Learning journeys](https://grafana.com/docs/learning-journeys/) to the Loki docs [#17956](https://github.com/grafana/loki/pull/17956). Revised the LogQL query page [#16286](https://github.com/grafana/loki/pull/16286) and added a LogQL video [#18111](https://github.com/grafana/loki/pull/18111). Added a caution to the Labels topic and added a [new topic](https://grafana.com/docs/loki/<LOKI_VERSION>/get-started/labels/remove-default-labels/) with instructions how to modify the default OpenTelemetry resource attributes that Loki converts to labels [#17958](https://github.com/grafana/loki/pull/17958). Updated the [caching topic](https://grafana.com/docs/loki/latest/operations/caching/) [#17420](https://github.com/grafana/loki/pull/17420).

{{< admonition type="note" >}}
Note that when appropriate, documentation updates have been backported to previous releases.
{{< /admonition >}}

Other improvements include the following:

* **analytics:** Change how analytics proxy works ([#19098](https://github.com/grafana/loki/pull/19098))
* **API:** Add endpoint returning tenant configured limits ([#17101](https://github.com/grafana/loki/issues/17101)) ([6818c90](https://github.com/grafana/loki/commit/6818c90011627b83c50eb9f23c53e1769abb46a7))
* **API:** Loki Improvement Document (LID) for query splitting ([#16958](https://github.com/grafana/loki/issues/16958)) ([66f0f0b](https://github.com/grafana/loki/commit/66f0f0bf596f0004cfcffa01684d82bb1ec51d9c))
* **compactor HS:** Add a dashboard for monitoring deletion with horizontally scalable compactor ([#18588](https://github.com/grafana/loki/issues/18588)) ([10db8ab](https://github.com/grafana/loki/commit/10db8abb58742a252e2a0b47355ca715031b0e9f))
* **compactor HS:**  Add a job runner for processing of deletion jobs ([#18058](https://github.com/grafana/loki/issues/18058))
* **compactor HS:**  Add job queue and deletion job builder  ([#17843](https://github.com/grafana/loki/issues/17843))
(#17843)
* **compactor HS:** Add jsonnet for deploying horizontally scalable compactor ([#18550](https://github.com/grafana/loki/issues/18550)) ([5e28950](https://github.com/grafana/loki/commit/5e28950556c6ba0f97db8b5450bec89c82fbd682))
* **compactor HS:** Add support for applying storage updates after finishing processing of deletion manifest ([#18294](https://github.com/grafana/loki/issues/18294)) ([ba3c670](https://github.com/grafana/loki/commit/ba3c67076a87d7916faef49e10573511988387b7))
* **compactor HS:** Add support for worker for processing of jobs from the compactor's job queue ([#18165](https://github.com/grafana/loki/issues/18165)) ([d05c4bc](https://github.com/grafana/loki/commit/d05c4bc500be779f35b6e25823da940a6e236229))
* **compactor HS:** Fixes and changes for getting horizontally scalable compactor to work well ([#18526](https://github.com/grafana/loki/issues/18526)) ([000f90d](https://github.com/grafana/loki/commit/000f90d74b28b81257c51db6c0ffefa2f87fdbca))
* **compactor HS:** Refactor interfaces and build a link between delete requests manager and compactor for HS of compactor ([#18326](https://github.com/grafana/loki/issues/18326)) ([3646607](https://github.com/grafana/loki/commit/364660748d0d391392dd43f699f0b8962ad00541))
* **compactor HS:** Store index updates per processed segment in the manifest to the object storage ([#18212](https://github.com/grafana/loki/issues/18212)) ([8007e22](https://github.com/grafana/loki/commit/8007e22db5ae293468403aa2af06b88efeb2f760))
* **compactor HS:** tune compactor worker config and add experimental feature warning to the docs ([#18539](https://github.com/grafana/loki/issues/18539)) ([5bf3f74](https://github.com/grafana/loki/commit/5bf3f74ab20af9f392c3e3f311637426c59d7d03))
* **compactor HS:** Use streaming RPCs for interacting with job queue over grpc ([#18125](https://github.com/grafana/loki/issues/18125)) ([385e317](https://github.com/grafana/loki/commit/385e3175cf46deeb066de6e5e04cb4698adb929d))
* **compactor HS:** Wire things up and add some metrics ([#18421](https://github.com/grafana/loki/issues/18421)) ([bd29320](https://github.com/grafana/loki/commit/bd293206cd78df5ded520187633738f0744b7c9a))
* **compactor HS:** Add a metric to track the number of jobs left to conclude ongoing unit of work ([#19506](https://github.com/grafana/loki/issues/19506))
* **distributor:** Add MaxRecvMsgSize config for uncompressed message size limits ([#16915](https://github.com/grafana/loki/issues/16915)) ([1d99f4d](https://github.com/grafana/loki/commit/1d99f4d86d25a361fc85162fadb21a78308d65d4))
* **distributor:** log ingestion policy when log_push_request is set ([#18712](https://github.com/grafana/loki/issues/18712)) ([0ec787f](https://github.com/grafana/loki/commit/0ec787f22a04620727ca4dc3fac762da2498c3e0))
* **distributor:** Mark truncated log lines with identifier ([#18262](https://github.com/grafana/loki/issues/18262)) ([0ee8e76](https://github.com/grafana/loki/commit/0ee8e76ba28065e2eb03c6908146522700ed6aa7))
* **distributor:** stop pushing to the metadata topic from distributors ([#17525](https://github.com/grafana/loki/issues/17525)) ([e0f015c](https://github.com/grafana/loki/commit/e0f015c623819e2df4357bc578a38bba5ca21e58))
* **distributor:** remove tenant topic tee ([#19082](https://github.com/grafana/loki/pull/19082))
* **fluentbit:** Update fluent/fluent-bit to v4 which adds support for structured metadata to the out_loki plugin ([#17200](https://github.com/grafana/loki/issues/17200)) ([f108e1c](https://github.com/grafana/loki/commit/f108e1cd71a969050d870582e9249ed72d3b456c))
* **fluentd:** Add 'compress gzip' setting to fluentd plugin ([#18995](https://github.com/grafana/loki/issues/18995))
* **helm:** Add `block_builder` config to helm chart ([#17451](https://github.com/grafana/loki/issues/17451)) ([a9808a1](https://github.com/grafana/loki/commit/a9808a1f7db9e04ffbbabf30fca20f3287641886))
* **helm:** Add `startupProbe` to memcached([#19166](https://github.com/grafana/loki/issues/19166))
* **helm:**  Add `startupProbe` to memcached exporter([#19165](https://github.com/grafana/loki/issues/19165))
* **helm:**  Add configurable livenessProbe to single binary StatefulSet([#19072](https://github.com/grafana/loki/issues/19072))
* **helm:**  Add dnsconfig to all missing resources([#18903](https://github.com/grafana/loki/issues/18903))
* **helm:** Add FOLDER_ANNOTATION logic for sidecar container in loki helm chart, making multi-tenant alerting easier ([#13289](https://github.com/grafana/loki/issues/13289)) ([833fcbc](https://github.com/grafana/loki/commit/833fcbce39fe956a7e006ea6618fbbd8d7ccfaa8))
* **helm:** Add health probes to admin-api ([#18546](https://github.com/grafana/loki/issues/18546)) ([358228a](https://github.com/grafana/loki/commit/358228a22295189d86c16d749a966eb12c7189e3))
* **helm:** Add health probes to bloom-builder ([#18549](https://github.com/grafana/loki/issues/18549))
* **helm:** Add health probes to bloom-gateway([#18551](https://github.com/grafana/loki/issues/18551))
* **helm:** Add health probes to bloom-planner([#18552](https://github.com/grafana/loki/issues/18552))
* **helm:** Add health probes to gateway component([#18545](https://github.com/grafana/loki/issues/18545))
* **helm:** Add health probes to loki in backend([#18548](https://github.com/grafana/loki/issues/18548))
* **helm:** Add location snippet to nginx config ([#18105](https://github.com/grafana/loki/issues/18105)) ([5737751](https://github.com/grafana/loki/commit/573775194c400ea58b37583546b45afc1846f038))
* **helm:** Add missing revisionHistoryLimit ([#18638](https://github.com/grafana/loki/issues/18638)) ([d0e0d1a](https://github.com/grafana/loki/commit/d0e0d1a4e47145b5e178f84fd554c4d26b9bb47b))
* **helm:** Add more specificity to affinity and topology spread constraints([#19061](https://github.com/grafana/loki/issues/19061)) 
* **helm:** Add namespaceOverride([#18707](https://github.com/grafana/loki/issues/18707)) 
* **helm:** Add non-default-values.yaml to increase test coverage ([#18360](https://github.com/grafana/loki/issues/18360)) ([b0e04f4](https://github.com/grafana/loki/commit/b0e04f41b40d1fbf7b09f858fec772eb0774e23f))
* **helm:** Add option to use deployment type instead of daemonset in canary ([#17364](https://github.com/grafana/loki/issues/17364)) ([a6563cf](https://github.com/grafana/loki/commit/a6563cfdaa21620d9cd0a337d7cddf22f2ff006c))
* **helm:** Add PDB for patternIngester ([#17058](https://github.com/grafana/loki/issues/17058)) ([7fad38d](https://github.com/grafana/loki/commit/7fad38d38c92b3d82385c771bdd4136ecf476375))
* **helm:** Add readiness and liveness support for all memcached  components ([#18525](https://github.com/grafana/loki/issues/18525)) ([9b54d9f](https://github.com/grafana/loki/commit/9b54d9f1a8667ee09f43d86065a6b327dfb3f223))
* **helm:** Add readiness probe for memcached ([#15609](https://github.com/grafana/loki/issues/15609)) ([6ed1461](https://github.com/grafana/loki/commit/6ed1461d14ae2d196566618a02f4310936da6db0))
* **helm:** Add replicas to loki-canary deployment ([#19095](https://github.com/grafana/loki/issues/19095))
* **helm:** Add startupProbe to loki-sc-rules ([#18547](https://github.com/grafana/loki/issues/18547)) ([121e84e](https://github.com/grafana/loki/commit/121e84ec1ea8ea90783f832735a0d7752a63e55e))
* **helm:** Add support for custom alert rule annotations ([#19193](https://github.com/grafana/loki/issues/19193))
* **helm:** Add tpl support for pattern_ingester and ingester_client ([#16759](https://github.com/grafana/loki/issues/16759)) ([901b2b0](https://github.com/grafana/loki/commit/901b2b01f651fbbb1a1fb1765a2fc8cee774b307))
* **helm:** Added trafficDistribution for service-distributor ([#17742](https://github.com/grafana/loki/issues/17742)) ([78f154f](https://github.com/grafana/loki/commit/78f154f77d656d356b1b9e78e6b0c17605290934))
* **helm:** Adds a flag for tokengen rbac components so that they can be disabled optionally ([#15882](https://github.com/grafana/loki/issues/15882)) ([10536b2](https://github.com/grafana/loki/commit/10536b24c54190d5363b34eae7b5f120c3bd9587))
* **helm:** Allow configuring service types ([#18708](https://github.com/grafana/loki/issues/18708))
* **helm:** Allow enabling user namespaces ([#18661](https://github.com/grafana/loki/issues/18661))
* **helm:** Allow external memcached setup ([#17432](https://github.com/grafana/loki/issues/17432)) ([013aa17](https://github.com/grafana/loki/commit/013aa17716dd96b7bd2004d8388f1f03f5b6efee))
* **helm:** Allow extraObjects to be defined as either a list or dictionary.([#13252](https://github.com/grafana/loki/issues/13252))
(#13252)
* **helm:** Allow passing tenant password hash instead of password ([#17049](https://github.com/grafana/loki/issues/17049)) ([20b97f7](https://github.com/grafana/loki/commit/20b97f77b0ae381f0c6dc16368f34e27f0e81141))
* **helm:** Allow setting labels for ingesters ([#18536](https://github.com/grafana/loki/issues/18536)) ([ab426be](https://github.com/grafana/loki/commit/ab426be4592da204c0e0aa668e0b5670aac99eac))
* **helm:** Enable rules sidecar for the ruler pods ([#17231](https://github.com/grafana/loki/issues/17231)) ([2c5ad02](https://github.com/grafana/loki/commit/2c5ad028a1f2e36590560a8091b162644bd06a36))
* **helm:** Expose all storage configuration ([#18509](https://github.com/grafana/loki/issues/18509)) ([db5e021](https://github.com/grafana/loki/commit/db5e02158ed04a2e45671698b129b51555acb548))
* **helm:** Expose labels on volumeClaimTemplates ([#13317](https://github.com/grafana/loki/issues/13317)) ([cdefbbf](https://github.com/grafana/loki/commit/cdefbbf3ac15dfede5e8e301f55041efd6fd920f))
* **helm:** Expose Loki UI in pure ingress ([#18400](https://github.com/grafana/loki/issues/18400)) ([21f3d09](https://github.com/grafana/loki/commit/21f3d09caab2cc6d64fbb07ceeaea8efbce25814))
* **helm:** Helm issue templates ([#18693](https://github.com/grafana/loki/issues/18693)) ([e0ec815](https://github.com/grafana/loki/commit/e0ec8153a3002a841899d47355fc562f9901d915))
* **helm:** Implementing support of l2 chunksCache memcache ([#17556](https://github.com/grafana/loki/issues/17556)) ([039e7c1](https://github.com/grafana/loki/commit/039e7c112f7c7f70060d934a7eb99e3609ef7e0f))
* **helm:** Integrate the enterprise-provisioner into Loki helm chart ([#17616](https://github.com/grafana/loki/issues/17616))
* **helm:** Make access modes for persistence on all PVCs and StatefulSets editable ([#13474](https://github.com/grafana/loki/issues/13474))
* **helm:** Only delete PVC on statefulset deletion, not scaling ([#19097](https://github.com/grafana/loki/issues/19097))
* **helm:** Support bypass all s3/gcs/azure config in object_store ([#17597](https://github.com/grafana/loki/issues/17597)) ([d6c2a8e](https://github.com/grafana/loki/commit/d6c2a8e08fe36a7a316a05f893d18ea6d6a0a434))
* **helm:** Support separate loki ruler storage configuration ([#18510](https://github.com/grafana/loki/issues/18510))
* **helm:** Support templated loki.operational_config ([#17045](https://github.com/grafana/loki/issues/17045)) ([078f353](https://github.com/grafana/loki/commit/078f353a85fdb9900e4a4505b9e8af0176ba108e))
 to 3.5.3 ([#18619](https://github.com/grafana/loki/issues/18619)) ([907bb61](https://github.com/grafana/loki/commit/907bb61cc348f1c946c08ff361f9d60a0a504658))
* **helm:** Update Loki version in charts ([#18447](https://github.com/grafana/loki/issues/18447)) ([e2770ae](https://github.com/grafana/loki/commit/e2770ae6d7794d722a215b3fc4206be3d3ee3770))
* **helm:** Use named ports for memcached services targetports ([#18990](https://github.com/grafana/loki/issues/18990))
* **helm:**  delete statefulset if volumeClaimTemplates changes ([#19217](https://github.com/grafana/loki/issues/19217))
* **helm:**  Added affinity property to the loki-canary deamonset ([#17720](https://github.com/grafana/loki/issues/17720))
* **ingester:** Add ingester_chunks_flush_requests_total ([#18696](https://github.com/grafana/loki/issues/18696))
* **ingester:**  per policy overridable stream limits ([#18994](https://github.com/grafana/loki/pull/18994))
* **kafka:** Support multiple Kafka clients in component ([#17757](https://github.com/grafana/loki/issues/17757))
* **kafka:** Adds partition-ingester push latency histogram ([#17385](https://github.com/grafana/loki/issues/17385)) ([01cf36d](https://github.com/grafana/loki/commit/01cf36df78d53abedd76eb5162df88cff3017895))
* **kafka:** Optionally enable Kafka histograms for read/write latency ([#17089](https://github.com/grafana/loki/issues/17089)) ([e962398](https://github.com/grafana/loki/commit/e962398462cb434e252a1e41e1be44436757a435))
* **kafka:** Refactors kafka/client to improve metric collection ([#17308](https://github.com/grafana/loki/issues/17308)) ([ab65ac5](https://github.com/grafana/loki/commit/ab65ac5e8ef5ee0b46cab7c63ad8eb13fa51d0ba))
* **kafka:** Support consuming records from Kafka ([#17691](https://github.com/grafana/loki/pull/17691))
* **limits:** Add ability to filter tenant limits endpoint by allowlist ([#18521](https://github.com/grafana/loki/issues/18521)) ([73de7b5](https://github.com/grafana/loki/commit/73de7b5378f7bc9f629933ba2c7cd20fbf9a0b3a))
* **logcli:** Add delete commands to logcli ([#18375](https://github.com/grafana/loki/issues/18375)) ([f38950a](https://github.com/grafana/loki/commit/f38950a02b4e26d7e694d107f8b41e121555a1b1))
* **logcli:**  Add --log.level parameter to help with diagnosing errors when using logcli. ([#19136](https://github.com/grafana/loki/issues/19136))
* **logs drilldown:** Return metric query partial results for drilldown ([#18286](https://github.com/grafana/loki/issues/18286)) ([c0c2265](https://github.com/grafana/loki/commit/c0c22652838af2080345cdef5d5967a5cbdb1bd5))
* **logs drilldown:** Drilldown config endpoint ([#19028](https://github.com/grafana/loki/pull/19028))
* **logs drilldown:** Implement `unwrap` as a projection
([#19409](https://github.com/grafana/loki/issues/19409))
* **logs drilldown:** persist patterns as aggregated metrics ([#17737](https://github.com/grafana/loki/pull/17737))
* **logs drilldown:** query persisted patterns ([#17980](https://github.com/grafana/loki/pull/17980))
* **loki-canary:** Update loki canary to support batched log push ([#17558](https://github.com/grafana/loki/pull/17558))
* **metrics:** Adds distributor lag counter to push.go ([#18012](https://github.com/grafana/loki/pull/18012))
* **metrics:**  Adds User-Agent to distributor push logging ([#17764](https://github.com/grafana/loki/pull/17764))
* **mixins:**  Allow disabling Thanos dashboard and fix dashboard's file name ([#18749](https://github.com/grafana/loki/issues/18749))
* **operator:** Add alert LokiIngesterFlushFailureRateCritical ([#18698](https://github.com/grafana/loki/issues/18698))
* **operator:** Add warning alert for when LokiStack is not getting ready ([#19258](https://github.com/grafana/loki/issues/19258))
* **operator:** Allow users to configure virtual-host-style for S3 secrets ([#17363](https://github.com/grafana/loki/issues/17363)) ([c4dace5](https://github.com/grafana/loki/commit/c4dace5c57646c0878fd8558d42ab1f7efaa0518))
* **operator:** Allow using resource requests as limits ([#17484](https://github.com/grafana/loki/issues/17484)) ([0b2bae8](https://github.com/grafana/loki/commit/0b2bae87f3646492129c141695811eac9e0b1ffe))
* **operator:** deploy network policies with LokiStack ([#19099](https://github.com/grafana/loki/issues/19099))
* **operator:** extend LokiStack authorization to support OTel Semantics ([#16031](https://github.com/grafana/loki/issues/16031))
* **operator:** s3 validation reject endpoints that contain a URL path ([#19356](https://github.com/grafana/loki/issues/19356))
* **operator:** Update Loki operand to v3.5.5 ([#19187](https://github.com/grafana/loki/issues/19187))
* **policies:** Default ingestion policy mappings merged with per-tenant mappings ([#18926](https://github.com/grafana/loki/pull/18926))
* **pattern ingester:** implement volume-based pattern filtering ([#18838](https://github.com/grafana/loki/pull/18838))


<!-- DO NOT PUBLISH in Release Notes, but will be visible in the CHANGELOG
* **ci:** Add workflow_dispatch for querytee-images workflow ([#19541](https://github.com/grafana/loki/issues/19541))
* **GEL:** Remove tokengen job and kubectl dependency. (#18803)
* Add method to get zone-aware partition consumers ([#17377](https://github.com/grafana/loki/issues/17377)) ([4a733fc](https://github.com/grafana/loki/commit/4a733fcf7db6421d28a535667f9dc31f67ec00b0))
* **compactor:** Compactor deletion manifest builder ([#17474](https://github.com/grafana/loki/issues/17474)) ([47961f8](https://github.com/grafana/loki/commit/47961f802d1d52851135e5077887aeae682381a4))
* **dataobj executor:** project node ([#17312](https://github.com/grafana/loki/issues/17312)) ([395030b](https://github.com/grafana/loki/commit/395030b13002c3b9f060c31ff54961144afdaad2))
* **dataobj, executor:** filter node execution ([#17327](https://github.com/grafana/loki/issues/17327)) ([cf54d50](https://github.com/grafana/loki/commit/cf54d502fcf76d8366db5af001cb18930669270c))
* **data-objects:** Add query stats collection to the dataobj readers ([#17128](https://github.com/grafana/loki/issues/17128)) ([9e68fb0](https://github.com/grafana/loki/commit/9e68fb01f4a2441de1997704843c5811b7cac7ab))
* **data-objects:** Add p50, p95 and p99 section sizes per tenant ([#19054](https://github.com/grafana/loki/pull/19054))
* **data-objects:** Add p50, p95 and p99 sections per tenant to stats ([#19044](https://github.com/grafana/loki/pull/19044))
* **data-objects:** Add tenant to section builders ([#18864](https://github.com/grafana/loki/pull/18864))
* **data-objects:** Add tenant to section metadata ([#18843](https://github.com/grafana/loki/pull/18843))
* **data-objects:** build multi-tenant data objects ([#19034](https://github.com/grafana/loki/pull/19034))
* **data-objects:** decode tenant when reading streams and logs sections ([#18846](https://github.com/grafana/loki/pull/18846))
* **data-objects:**  print the tenant in the dump and stats sub-commands ([#19033](https://github.com/grafana/loki/pull/19033))
* **data-objects:** improve dataobj-inspect command ([#18618](https://github.com/grafana/loki/issues/18618)) ([238e0b7](https://github.com/grafana/loki/commit/238e0b781817f33540c36c71087f6eeefca50838))
* **data-objects:** Initial index-builder implementation ([#18297](https://github.com/grafana/loki/issues/18297)) ([1f0edcd](https://github.com/grafana/loki/commit/1f0edcd4ac77907aebdb8732284062205357da8d))
* **distributor:** check for failed reason in distributors ([#18128](https://github.com/grafana/loki/issues/18128)) ([104c457](https://github.com/grafana/loki/commit/104c4570d835514e741de28e44d3029cc2e5d7ea))
* **distributor:** Add agent IPs to distributor log ([#17011](https://github.com/grafana/loki/issues/17011)) ([7fc9026](https://github.com/grafana/loki/commit/7fc90262088d77097aa686acf3e431875e6aabff))
* **distributor:** Add enforceLimits to ingest_limits.go ([#17117](https://github.com/grafana/loki/issues/17117)) ([d197cda](https://github.com/grafana/loki/commit/d197cdac8d5d069de5589ecf15ce13abd982383c))
* **distributor:** Add metric to track ingest limits failures in distributor ([#17015](https://github.com/grafana/loki/issues/17015)) ([7f1a1c7](https://github.com/grafana/loki/commit/7f1a1c755a9c531d5dc782193f17b8bd25dca2e9))
* **distributor:** Add tests for enforcing limits in distributors ([#17124](https://github.com/grafana/loki/issues/17124)) ([69aeda1](https://github.com/grafana/loki/commit/69aeda1bbff040c7c660b89a3facaac94621ebba))
* **engine:** Implements predicate mapping for DataObjScan ([#17621](https://github.com/grafana/loki/issues/17621)) ([cbb5be6](https://github.com/grafana/loki/commit/cbb5be6d57432859b7a77d6f3f4b8ec8f5f1032e))
* **engine, dataobj:** logql bench wiring for new engine [non-fork] ([#17627](https://github.com/grafana/loki/issues/17627)) ([ccb65f9](https://github.com/grafana/loki/commit/ccb65f9670cb6e3b4eabd56687962d7285ca71d6))
* **engine:** Add json parsing stage to v2 engine ([#19240](https://github.com/grafana/loki/issues/19240))
* **engine:** Add logfmt parse support to the v2 query engine ([#18931](https://github.com/grafana/loki/issues/18931))
* **engine:** More aggregations for the new query engine (#19350)
* **engine:**Prefetch inputs of Merge pipeline concurrently (#19039)
* **goldfish:**  improve query performance with indexes and partitions (#19023)
* **goldfish:** Add user and query engine to Goldfish UI (#18801)
* **goldfish:** capture logs drilldown flag in query samples ([#19242](https://github.com/grafana/loki/pull/19242))
* **goldfish:** Add traceId support to goldfish ([#18681](https://github.com/grafana/loki/issues/18681)) ([2f0dc74](https://github.com/grafana/loki/commit/2f0dc74309048193ce88ce054fafb95458fb203d))
* **goldfish:** Add traceId to Goldfish UI ([#18726](https://github.com/grafana/loki/issues/18726)) ([4fabb8d](https://github.com/grafana/loki/commit/4fabb8d632834e2e11911724ce7a86fdd9959b65))
* **goldfish:** Goldfish UI ([#17983](https://github.com/grafana/loki/issues/17983)) ([462acb5](https://github.com/grafana/loki/commit/462acb52bbe11f47ee6c9e40401fc3fc4bd374df))
* **goldfish:** Goldfish UI Improvements ([#18504](https://github.com/grafana/loki/issues/18504)) ([b14a282](https://github.com/grafana/loki/commit/b14a282bfa3ef4fb1b09afc2b317dcce863435b2))
* **ingest-limits:**  Re-implement ExceedsLimits in ingest-limits-frontend ([#17576](https://github.com/grafana/loki/issues/17576)) ([7b88a02](https://github.com/grafana/loki/commit/7b88a02fdccce5549c3efb25b6a29cd3e7bff34a))
* **ingest-limits:** Add exceeds limits RPC with no-op implementation ([#17546](https://github.com/grafana/loki/issues/17546)) ([cd5e7df](https://github.com/grafana/loki/commit/cd5e7df2a26c5c2b2ad0c345e4f4c03d22897686))
* **ingest-limits:** Add partition id caching ([#16964](https://github.com/grafana/loki/issues/16964)) ([54ff5dc](https://github.com/grafana/loki/commit/54ff5dce52712068d0f64286979fd5a21eab0bf3))
* **ingest-limits:** Append stream metadata records to Kafka-based WAL ([#17602](https://github.com/grafana/loki/issues/17602)) ([932f39b](https://github.com/grafana/loki/commit/932f39bc0dacff25b6546916e016ca7b7bf44f4e))
* **ingest-limits:** Enforce synchronously max stream limit per partition ([#17527](https://github.com/grafana/loki/issues/17527)) ([c55f038](https://github.com/grafana/loki/commit/c55f038bba6a5f411fc8c4b185db5dc41ad51199))
* **ingest-limits:** Support disabling the partition consumers cache ([#17318](https://github.com/grafana/loki/issues/17318)) ([1d68047](https://github.com/grafana/loki/commit/1d68047aee5bf6622d8b8e5a13c753f9d164205d))
* **limits:** Add a fast path for consuming records from Kafka ([#17858](https://github.com/grafana/loki/issues/17858))
* **limits:** Add metric that tracks unanswered streams ([#17966](https://github.com/grafana/loki/pull/17966))
* **limits:** limits-frontend failover to other zones ([#17408](https://github.com/grafana/loki/pull/17408))
* **limits:** optimize rate buckets to avoid re-allocating slice ([#17904](https://github.com/grafana/loki/pull/17904))
* **limits:** quick fix to produce a stream once per minute ([#17996](https://github.com/grafana/loki/pull/17996))
* **operator:** Update Loki operand to v3.4.3 (#17847)
* **operator:** Update Loki operand to v3.5.4 (#19122)
* **planning:**  Adds physical and logical nodes for range aggregation ([#17974](https://github.com/grafana/loki/issues/17974))
* **tools:** Add stream generator ([#17214](https://github.com/grafana/loki/issues/17214)) ([af97644](https://github.com/grafana/loki/commit/af9764470b49c36396aa530fb9a1de58cc94d119))
* **testing:** Add ReasonFailed ([#18055](https://github.com/grafana/loki/issues/18055)) ([b15d85d](https://github.com/grafana/loki/commit/b15d85da9b1448490c6d17cbc71bb907761c4bc5))
* **testing** return ReasonFailed from ingest-limits frontend ([#18123](https://github.com/grafana/loki/issues/18123)) ([c42ccc3](https://github.com/grafana/loki/commit/c42ccc3248f5fc0ffdc7355fbceed4f1db68c75d))
* **tools:** Querytee Goldfish ([#17959](https://github.com/grafana/loki/issues/17959)) ([7775a41](https://github.com/grafana/loki/commit/7775a411f0c1ef55985376d6d80f278f37ccf718))
* **ui:** Add ingest limits rings ([#16978](https://github.com/grafana/loki/issues/16978)) ([1df66cc](https://github.com/grafana/loki/commit/1df66cc00717cd55ce481e12a4a3fa377d09b95a))
 -->

## Deprecations

One of the focuses of Loki 3.0 was cleaning up unused code and old features that had been previously deprecated but not removed. Loki 3.0 removed a number of previous deprecations and introduces some new deprecations. Some of the main areas with changes include:

- Loki 3.6 is being built with distro-less containers, which means debugging tools have been removed. Note that this change only affects the 3.6.x releases, it has not been backported to the 3.5 release.

- The Loki Helm chart uses MinIO as an object store. MinIO will be removed from the Helm Charts in a future release.  Note that the last available Docker image for MinIO contains a High severity CVE. See [this issue](https://github.com/minio/minio/issues/21647) for more information.

- [Promtail](https://grafana.com/docs/loki/<LOKI_VERSION>/send-data/promtail/) is deprecated, as the code has been merged into Grafana Alloy. EOL is on February 28, 2026. You can find migration documentation and a utility to convert your Promtail configuration to Alloy configuration in the [Alloy documentation](https://grafana.com/docs/alloy/latest/set-up/migrate/from-promtail/). Note that this deprecation does NOT include the lambda-promtail client.
   {{< admonition type="note" >}}
   The code and documentation for the lambda-promtail client has moved to the new [lambda-promtail repo](https://github.com/grafana/lambda-promtail).
   {{< /admonition >}}

- The Grafana Agent is end of life as of November 1, 2025.  If you haven't yet migrated to [Grafana Alloy](https://grafana.com/docs/alloy/latest/), you should do so as soon as possible.

- [Deprecated storage options](https://grafana.com/docs/loki/<LOKI_VERSION>/storage/) including the deprecation of the BoltDB store.

- [Deprecated configuration options](https://grafana.com/docs/loki/<LOKI_VERSION>/configure/).

- [API endpoint deprecations](https://grafana.com/docs/loki/<LOKI_VERSION>/reference/api/#deprecated-endpoints).

To learn more about breaking changes in this release, refer to the [Upgrade guide](https://grafana.com/docs/loki/<LOKI_VERSION>/setup/upgrade/).

{{< docs/shared source="alloy" lookup="agent-deprecation.md" version="next" >}}

## Upgrade Considerations

For important upgrade guidance, refer to the [Upgrade Guide](https://grafana.com/docs/loki/<LOKI_VERSION>/setup/upgrade/).

- **BREAKING CHANGE - helm:** Helm chart version 6.34.0 introduces a breaking change that affects users with zone-aware ingester replication enabled. For more information, refer to the [Upgrade documentation](https://grafana.com/docs/loki/<LOKI_VERSION>/setup/upgrade/#helm-chart-upgrades).

## Bug fixes

### 3.6.0 (2025-11-03)

* **aggregated metrics:** Hide `__aggregated_metric__` in /series and /labels. This will alleviate confusion for people using a tool like logcli series --analyze-labels for cardinality analysis. ([#14677](https://github.com/grafana/loki/issues/14677)) ([4b0aaaa](https://github.com/grafana/loki/commit/4b0aaaaf2e22575381d2cfe90564a2cee6ddc7e8))
* **build:** Udpate purgo package ([#17807](https://github.com/grafana/loki/pull/17807))
* **build:** remove busybox from dockerfile ([#19502](https://github.com/grafana/loki/issues/19502))
* **build:** remove UI from docker build ([#19425](https://github.com/grafana/loki/issues/19425))
* **build:**rpm signature config ([#19476](https://github.com/grafana/loki/issues/19476))
* **build:** Update ckit ([#18997](https://github.com/grafana/loki/issues/18997))
* **build:** Update dskit to fix linux/arm build ([#18715](https://github.com/grafana/loki/issues/18715))
* **ci:** Fix deprecation errors from staticcheck linter ([#17210](https://github.com/grafana/loki/issues/17210)) ([cfe3675](https://github.com/grafana/loki/commit/cfe36752952cfa1aac6f59bb5804999e09ef1e41))
* **ci:** Fix lambda-promtail image build ([#18443](https://github.com/grafana/loki/issues/18443)) ([8f0ba2e](https://github.com/grafana/loki/commit/8f0ba2eae6e01d96523d8a0d71fb0bf1ae29a224))
* **ci:** Fix workflow timeout added in wrong format ([#18348](https://github.com/grafana/loki/issues/18348)) ([53ba9c7](https://github.com/grafana/loki/commit/53ba9c7fd63465209e9919ef1e5346dbeb66b2aa))
* **ci:** Read releaseLibRef from jsonnet.json lockfile ([#18538](https://github.com/grafana/loki/issues/18538)) ([26417b5](https://github.com/grafana/loki/commit/26417b594593269339e440df2d3cfbdf6bb06541))
* **chunkenc:** avoid memory allocations when loading symbolizer from a flushed chunk ([#17953](https://github.com/grafana/loki/issues/17953))
* **compactor:** Return request ID in response header ([#19444](https://github.com/grafana/loki/issues/19444))
* **compactor:** Concurrent map access for processedSeries in delete requests manager ([#17469](https://github.com/grafana/loki/issues/17469)) ([32c5088](https://github.com/grafana/loki/commit/32c50888b04de299380895585dce1c77755c488c))
* **compactor:** Fix timeout and series progress marker for same requests with different shards ([#17125](https://github.com/grafana/loki/issues/17125)) ([288ec8c](https://github.com/grafana/loki/commit/288ec8c64dca6457fb2287deed9ba841e70c61ae))
* **compactor:** Move the check for duplicate series up the call stack to fix an issue when retention is enabled ([#17663](https://github.com/grafana/loki/issues/17663)) ([a5e95ba](https://github.com/grafana/loki/commit/a5e95bacee50ce4d2512945f697a7aaff4403139))
* **compactor:** Wire up deletion series progress tracking ([#17099](https://github.com/grafana/loki/issues/17099)) ([db59d0e](https://github.com/grafana/loki/commit/db59d0e9b2c463d85238e13a0c8dfa8a66e3967d))
* **compactor:** Do not try to merge the already consolidated delete requests while listing them ([#18544](https://github.com/grafana/loki/issues/18544)) ([8054076](https://github.com/grafana/loki/commit/8054076873f925a539119e46422a4129766b9541))
* **compactor:** Ensure to return delete requests only for the requested tenant ([#18589](https://github.com/grafana/loki/issues/18589)) ([cdb190b](https://github.com/grafana/loki/commit/cdb190be96eeed8087c9692726abae01ce6e7208))
* **compactor:**  Fix handling of duplicate delete requests ([#18460](https://github.com/grafana/loki/issues/18460)) ([255fce2](https://github.com/grafana/loki/commit/255fce20d813fc0b39758b6dbf51b23b987f0609))
* **compactor:** Fix lint failure in retention.go ([#17894](https://github.com/grafana/loki/issues/17894))
* **compactor:**  Use the custom objectExists function to work around bug in Thanos object client ([#18820](https://github.com/grafana/loki/issues/18820))
* **compactor:** Fix panic while applying storage updates when a whole chunk is deleted by line filters ([#19262](https://github.com/grafana/loki/issues/19262))
* **compactor:** set delete request batch to empty when we load to fail requests ([#17810](https://github.com/grafana/loki/issues/17810))
* **config_wrapper:** apply `instance_enable_ipv6` from common to all components ([#18254](https://github.com/grafana/loki/issues/18254)) ([5bc5853](https://github.com/grafana/loki/commit/5bc58538384a0895db47f57338a36cbe16049e52))
* **distributor:** Disable metadata topic writes ([#17437](https://github.com/grafana/loki/issues/17437)) ([46b2271](https://github.com/grafana/loki/commit/46b2271aacd26734979667da61d5c9d24a8efb2b))
* **distributor:** Revert remove colons from level detection ([#16999](https://github.com/grafana/loki/issues/16999)) ([e678b61](https://github.com/grafana/loki/commit/e678b615c18f52a23862d5d3ff39102989ec8374))
* **distributor:** Short circuit level detection when already detected ([#17028](https://github.com/grafana/loki/issues/17028)) ([58aa00a](https://github.com/grafana/loki/commit/58aa00a5f47bfd851fbd01d94f0523b82968f896))
* **distributor:** Skip streams over limits in dry-run mode ([#17114](https://github.com/grafana/loki/issues/17114)) ([2cde9b1](https://github.com/grafana/loki/commit/2cde9b12e9336531b54241437150d3cd83e7529a))
* **distributor:** Prevent panic when ContentLength is negative in Distributor RequestBodyTooLarge metrics ([#17054](https://github.com/grafana/loki/issues/17054)) ([9e9f534](https://github.com/grafana/loki/commit/9e9f534460527f25d28fa3f3e17cd1eb4148b39d))
* **distributor:** detect "Information" log level as "info" ([#18195](https://github.com/grafana/loki/issues/18195)) ([82263d3](https://github.com/grafana/loki/commit/82263d383a0ac6efac50c681f00d26cb2848d367))
* **distributor:** correctly register allowed log level fields ([#19261](https://github.com/grafana/loki/issues/19261))
* **distributor:** extended detected level for debug and critical level ([#18370](https://github.com/grafana/loki/issues/18370))
* **docs:** Update configuration.md ([#17269](https://github.com/grafana/loki/issues/17269)) ([70de523](https://github.com/grafana/loki/commit/70de5235b7c0e5a549f4bbc7cd127956d595badb))
* **docs:** Added instructions for how to upgrade zone-aware ingesters ([#18658](https://github.com/grafana/loki/issues/18658)) ([aff2cb0](https://github.com/grafana/loki/commit/aff2cb0694cae99847b73da914ee4abd2432cdd0))
* **engine:** Don't attempt to release batch reference on read for merge node ([#18913](https://github.com/grafana/loki/issues/18913))
* **engine:** Fix bug in `SortMerge` which caused rows to be skipped due to incorrect sorting ([#18334](https://github.com/grafana/loki/issues/18334)) ([4fbe7c1](https://github.com/grafana/loki/commit/4fbe7c1a21a6443951bca3ad5e40712b24b4ef73))
* **engine:** Fix out-of-bounds panic in SortMerge implementation ([#17967](https://github.com/grafana/loki/issues/17967))
* **frontend:** Allow resolution of v6 addresses. ([#18251](https://github.com/grafana/loki/issues/18251)) ([8481b34](https://github.com/grafana/loki/commit/8481b34dd583d021e0dfa89d64298d2f36f75176))
* **helm:** Add flush=true to preStop hook ([#16063](https://github.com/grafana/loki/issues/16063)) ([a375751](https://github.com/grafana/loki/commit/a375751e4dc126a27cd8784c802e07871803868d))
* **helm:** Add init container configuration for backend, bloom builder, distributor, query-frontend, query-scheduler, read, write. ([#18709](https://github.com/grafana/loki/issues/18709))
* **helm:** Add livenessProbe to read pods in Simple Scalable mode ([#17063](https://github.com/grafana/loki/issues/17063))
* **helm:** Add missing log deletion endpoint to native ingress paths ([#14390](https://github.com/grafana/loki/issues/14390)) ([6db8b1f](https://github.com/grafana/loki/commit/6db8b1f60bdbd07b8d8e1628fd3ef6030e064e77))
* **helm:** Add release namespace metadata to HorizontalPodAutoscaling that lack it ([#18453](https://github.com/grafana/loki/issues/18453)) ([faae40a](https://github.com/grafana/loki/commit/faae40ab788d91dc4b7dbf110bbc1d3fcf4bf29c))
* **helm:** Add validation for loki.storage.bucketNames ([#13781](https://github.com/grafana/loki/issues/13781)) ([831c814](https://github.com/grafana/loki/commit/831c814f6c9356784a3aa2b248c7be150b241cbd))
* **helm:**  admin-api should only be deployed in microservice mode ([#13655](https://github.com/grafana/loki/issues/13655))
* **helm:** Allow loki to use hostPath volumes ([#17680](https://github.com/grafana/loki/issues/17680)) ([8e61a5b](https://github.com/grafana/loki/commit/8e61a5bd23a9d388f9111ea824aaf73aa37366ff))
* **helm:** Allow metrics networkpolicy only from namespace ([#17555](https://github.com/grafana/loki/issues/17555)) ([3a9b8e8](https://github.com/grafana/loki/commit/3a9b8e88a3595d27b52b79dab7c3bb6351b86b99))
* **helm:**  avoid double zonal ingester scrapping by not scrapping headless svc ([#19000](https://github.com/grafana/loki/issues/19000))
* **helm:** Create namespaced RBAC when sidecar is enabled ([#16776](https://github.com/grafana/loki/issues/16776)) ([7c9003e](https://github.com/grafana/loki/commit/7c9003eae54ab9b5497b3abe14fab7f754057b64))
* **helm:** Do not strip whitespace in target definitions for querier and read deployments  ([#19464](https://github.com/grafana/loki/issues/19464))
* **helm:** Ensure global.extraEnv and global.extraEnvFrom applied to all resources consistently ([#16828](https://github.com/grafana/loki/issues/16828)) ([ee479d0](https://github.com/grafana/loki/commit/ee479d098000690f09372136d08ee9ba99b9a853))
* **helm:** explicitly set registry for k8s-sidecar image  ([#19233](https://github.com/grafana/loki/issues/19233))
* **helm:** Fix global extra* values  ([#17020](https://github.com/grafana/loki/issues/17020))
* **helm:** Fix incorrect context references in Helm storage templates ([#18740](https://github.com/grafana/loki/issues/18740)) ([1f362c8](https://github.com/grafana/loki/commit/1f362c8182b95db2f8d4a3e84b624ee528c738d4))
* **helm:** Fix PDB settings for chunksCache and resultsCache ([#18321](https://github.com/grafana/loki/issues/18321)) ([e03b9b9](https://github.com/grafana/loki/commit/e03b9b9f9210201ce593f31eb90b12c4f9e2b1b8))
* **helm:** Fix setting X-Scope-OrgID header ([#18414](https://github.com/grafana/loki/issues/18414)) ([2f461c9](https://github.com/grafana/loki/commit/2f461c90e133fe139d75a2aa90ef4a534ddcae3a))
* **helm:** Fix storage_config when use_thanos_objstore is set to true ([#17024](https://github.com/grafana/loki/issues/17024)) ([81866d7](https://github.com/grafana/loki/commit/81866d790cb1f3140d5ddf7f9e50a0083c7accd8))
* **helm:** Fixed statement logic to enable annotations ([#17756](https://github.com/grafana/loki/issues/17756))
* **helm:** Gateway Ingester endpoints points to inexistent service when zone aware replication is enabled ([#17362](https://github.com/grafana/loki/issues/17362)) ([395a711](https://github.com/grafana/loki/commit/395a71117275c10385799c1226ca1fda1ec0c003))
* **helm:** Make loki.storage.bucketNames are optional, if builtin minio is enabled. ([#18653](https://github.com/grafana/loki/issues/18653)) ([409ccbd](https://github.com/grafana/loki/commit/409ccbdc4e686895e6795888ba6b56b7ae93f332))
* **helm:** missing s3 field in lokiStorageConfig templated value ([#18791](https://github.com/grafana/loki/issues/18791))
* **helm:** Move loki-sc-rules to second position in containers ([#17937](https://github.com/grafana/loki/issues/17937)) ([6e72df3](https://github.com/grafana/loki/commit/6e72df395b8c5f3d6bb822d232ab2432be1c5767))
* **helm:** Only validate the ruler key exists under loki.storage.bucketNames when an object storage bucket is being used ([#18665](https://github.com/grafana/loki/issues/18665)) ([0604477](https://github.com/grafana/loki/commit/0604477af256110e43dd467974f1afade028f605))
* **helm:** Remove flaky enterprise test ([#19362](https://github.com/grafana/loki/issues/19362))
* **helm:** Removing deprecated admin_api_directory to avoid config crash ([#18731](https://github.com/grafana/loki/issues/18731)) ([8cce03c](https://github.com/grafana/loki/commit/8cce03c534255a5ca38878bbdaf65da490fd49d6))
* **helm:** Roll back change to Thanos ruler storage ([#18907](https://github.com/grafana/loki/issues/18907))
* **helm:** un-deprecate several features in `monitoring` block ([#19012](https://github.com/grafana/loki/issues/19012))
* **helm:** Update querier, read, and single binary target definitions for UI enablement ([#19461](https://github.com/grafana/loki/issues/19461))
* **helm:** Use correct serviceName in zone-aware ingester statefulsets ([#18558](https://github.com/grafana/loki/issues/18558)) ([2706302](https://github.com/grafana/loki/commit/2706302caced15fa5cd2b32247e74f556850e032))
* **helm:** In helm chart fix indentation in nginx gateway config template handling ([#18167](https://github.com/grafana/loki/issues/18167)) ([4fe20a7](https://github.com/grafana/loki/commit/4fe20a7e506290a6b4f4c51571251f64dd9b5f56))
* **helm:** Loki chart fails to render proper YAML when add more than one extra manifest ([#12911](https://github.com/grafana/loki/issues/12911)) ([cf12656](https://github.com/grafana/loki/commit/cf12656a148cee6a605c19c45b8c27e4050f2ece))
* **helm:** Make helm use grpc for compactor address ([#17454](https://github.com/grafana/loki/issues/17454)) ([90003f6](https://github.com/grafana/loki/commit/90003f6d9b9c90249d360aa0648ed197aef1a2cd))
* **helm:** Use gateway container port as nginx server port ([#18774](https://github.com/grafana/loki/issues/18774))
* **helm:** Use strings in stead of integers for ports in CiliumNetworkPolicies ([#19252](https://github.com/grafana/loki/issues/19252))
* **helm:** Websocket related proxy_set_header to locations back to resolve high CPU usage. ([#18800](https://github.com/grafana/loki/issues/18800))
* **helm:** Use UDP/53 for DNS egress instead of named port  ([#19073](https://github.com/grafana/loki/issues/19073))
* **helm:** Add single-binary component to ingress NetworkPolicy ([#19229](https://github.com/grafana/loki/issues/19229))
* **helm:** canary only worked when gateway enabled ([#16758](https://github.com/grafana/loki/issues/16758))
* **helm:** Enable ui in helm deployments ([#17562](https://github.com/grafana/loki/issues/17562))
* **helm:** Update loki-helm-test image tag to latest commit ([#19227](https://github.com/grafana/loki/issues/19227))
* **ingester:** Fix missing series in monolithic mode ([#17067](https://github.com/grafana/loki/issues/17067)) ([5625464](https://github.com/grafana/loki/commit/5625464332fc0b3371b744d60d36acaf2600665a))
* **json parser:** Fix possible JSON log line corruption caused by `json` parser on query path ([#18056](https://github.com/grafana/loki/issues/18056))
* **json, structured metadata:** correctly handle escaping in json parsing API ([#17068](https://github.com/grafana/loki/issues/17068))
* **json, structured metadata:** json-parsing cleanup ([#17072](https://github.com/grafana/loki/issues/17072)) ([2aed4c3](https://github.com/grafana/loki/commit/2aed4c3da5e97ea3c40091961395568f693bf1cf))
* **kafka:** Remove duplicated metric from Kafka producer ([#18614](https://github.com/grafana/loki/issues/18614)) ([a67a460](https://github.com/grafana/loki/commit/a67a460e9d7db43a793b180f2e73584fbe2497bb))
* **kafka:** Disable defaults address defaults ([#17825](https://github.com/grafana/loki/issues/17825))
* **kafka:**  Use cooperative active sticky load balancer ([#19160](https://github.com/grafana/loki/issues/19160))
* **limits:** Adapt defaults and expose evict interval ([#17808](https://github.com/grafana/loki/issues/17808))
* **limits:** Fix ingest-limits eviction metric ([#17779](https://github.com/grafana/loki/issues/17779))
* **limits:** Read the consumer group and topic from the ingest-limits config ([#17831](https://github.com/grafana/loki/issues/17831))
* **limits:** Set ready when all partitions ready ([#18092](https://github.com/grafana/loki/issues/18092)) ([a07bee5](https://github.com/grafana/loki/commit/a07bee5dc2aae2c0618aba8d049630597b21b611))
* **limits:** counter variables should not have total at the end (([#17982](https://github.com/grafana/loki/issues/17982))
* **loki:** Return defaults for non-existent tenants on applied limits endpoint ([#17942](https://github.com/grafana/loki/issues/17942))
* **logql:** Fix inconsistency with parsed field short circuiting ([#17104](https://github.com/grafana/loki/issues/17104)) ([88beefb](https://github.com/grafana/loki/commit/88beefb02acca7651d57e69dd5118598d829a904))
* **logQL:** While validating logql expression, detect and validate expression in label_replace ([#18470](https://github.com/grafana/loki/issues/18470)) ([d379de5](https://github.com/grafana/loki/commit/d379de501f93be62cb0f72948794276e817d2599))
* **logql:** Implement approx-topk function on querier ([#17816](https://github.com/grafana/loki/issues/17816))
* **memberlist:** Allow resolution of advertise address from v6 interface ([#18250](https://github.com/grafana/loki/issues/18250)) ([8594d1c](https://github.com/grafana/loki/commit/8594d1ca282a9378091c122a2aa31d4b3af3f817))
* **mixins:** Fix label generation for Loki logs dashboard ([#17412](https://github.com/grafana/loki/issues/17412)) ([da2b620](https://github.com/grafana/loki/commit/da2b620964e2b452598d2817107433e2e0092cc3))
* **mixin:** Fix typo in Loki Reads dashboard TSDB row ([#18872](https://github.com/grafana/loki/issues/18872))
* **objstore:** Ruler not starting and incorrect mkdir path when Thanos Store is enabled ([#16555](https://github.com/grafana/loki/issues/16555)) ([3da9f2c](https://github.com/grafana/loki/commit/3da9f2cae6cb6c01e185ef9a596cae8e3f782873))
* **operator:** Fix type of maximum OpenShift version property ([#18066](https://github.com/grafana/loki/issues/18066)) ([f7c7dfa](https://github.com/grafana/loki/commit/f7c7dfa910d03e2ddc9c95c8d22fb3bff5c78e6b))
* **operator:** Fix typo in docs regarding forcepathstyle ([#17725](https://github.com/grafana/loki/issues/17725))
* **operator:** Update maximum OpenShift version ([#17954](https://github.com/grafana/loki/issues/17954))
* **operator:** Update memberlist when ingester becomes unhealthy ([#17026](https://github.com/grafana/loki/issues/17026)) ([c63f0a9](https://github.com/grafana/loki/commit/c63f0a9d8d93398fc47d1992ac6370fe57c8e58f))
* **operator:** Update webhook validator for alerts/rules ([#17824](https://github.com/grafana/loki/issues/17824))
* **operator:** Updated AlertingRule sample to make it comply with the validation we apply ([#18671](https://github.com/grafana/loki/issues/18671))
* **operator:** upgrade OPA policy syntax for v1+ ([#18795](https://github.com/grafana/loki/issues/18795))
* **otlp:** Calculate entry metadata size before adding resource/scope attributes ([#17629](https://github.com/grafana/loki/issues/17629)) ([2161c8c](https://github.com/grafana/loki/commit/2161c8c52c36ac2d6657dbc670472be2022ca90f))
* **patterns:** Pattern persistence feature flag ([#18285](https://github.com/grafana/loki/issues/18285)) ([a206324](https://github.com/grafana/loki/commit/a206324ae3640d5f7615c2115fb3272256e95c6d))
* **patterns:** Limit volume and frequency of persisted patterns ([#18362](https://github.com/grafana/loki/issues/18362)) ([c690827](https://github.com/grafana/loki/commit/c690827c6a655ada93806237d81643025ab53494))
* **patterns:** Fix feature flag for enabling pattern persistence ([#18216](https://github.com/grafana/loki/issues/18216)) ([c167800](https://github.com/grafana/loki/commit/c167800b3f6e7edd7b3f06a9105245c98b7391dd))
* **push:** Add guard clauses to prevent negative counter values ([#17056](https://github.com/grafana/loki/issues/17056)) ([9000de1](https://github.com/grafana/loki/commit/9000de1aa7a6508234ee58adb346549ac3df2648))
* **push:** Fix guard clauses to prevent error spam in logs ([#17372](https://github.com/grafana/loki/issues/17372)) ([d70b20e](https://github.com/grafana/loki/commit/d70b20e37ffb788297bb42933aabc3fa5723f78c))
* **push:** Fix push stats calculation ([#19319](https://github.com/grafana/loki/issues/19319))
* **oltp:** apply global otlp config to tenant config only when it is updated in the overrides ([#19213](https://github.com/grafana/loki/issues/19213))
* **querier:**  Fixes panic when filtering agg metrics from nil resp ([#17662](https://github.com/grafana/loki/issues/17662))
* **querier:** Allow boolean numeric values in detected labels ([#16997](https://github.com/grafana/loki/issues/16997)) ([bfb935d](https://github.com/grafana/loki/commit/bfb935d893b6c3dec8d5fee539478c64d3012dd3))
* **querier:** Fix integer overrun when calculating parallelism for very long time range queries ([#17428](https://github.com/grafana/loki/issues/17428)) ([82acbd5](https://github.com/grafana/loki/commit/82acbd58b22481df3999f34edcace200940ce79b))
* **querier:** Better fix integer overrun when calculating parallelism for very long time range queries ([#17430](https://github.com/grafana/loki/issues/17430)) ([d660af3](https://github.com/grafana/loki/commit/d660af37fbc7dc9c7426999d14555c9bc688c565))
* Revert "perf: Fix memory leak in cachedIterator ([#17628](https://github.com/grafana/loki/issues/17628))" ([#18687](https://github.com/grafana/loki/issues/18687)) ([0316740](https://github.com/grafana/loki/commit/03167408063088542d251a136d314471f09f33e9))
* **ruler:** correct log level verbosity in rule evaluation ([#19519](https://github.com/grafana/loki/issues/19519))
fix(ruler): Return StatusBadRequest on multiple org IDs (#17850)
* **storage:** Fix nil pointer dereference in Volume method of the composite store ([#18064](https://github.com/grafana/loki/issues/18064)) ([fc7c018](https://github.com/grafana/loki/commit/fc7c0189c063d59d8933159faa9ab8f3e9df7f06))
* **storage:** Use default config when building s3 client (backport k277) ([#19559](https://github.com/grafana/loki/issues/19559))
* **stream-generator:** Split create/keep-alive streams routines ([#17815](https://github.com/grafana/loki/issues/17815)) 
* **structured metadata:** Improve structured metadata label normalization performance ([#17332](https://github.com/grafana/loki/issues/17332)) ([87922da](https://github.com/grafana/loki/commit/87922da28d332115f41d514f98c47fafb26fc7c6))
* **structured metadata:** Unescape JSON structured metadata string values ([#13919](https://github.com/grafana/loki/issues/13919)) ([9629d07](https://github.com/grafana/loki/commit/9629d07c60a25b27aeddb81af3ea6ceb9031fd52))
* **structured metadata:** Ensure we do not Add duplicate structured metadata from stream labels and extracted map ([#18523](https://github.com/grafana/loki/issues/18523)) ([db72d63](https://github.com/grafana/loki/commit/db72d63211c2cc5208d207b5795d5109b74c16ca))
* **tests:** Update kfake to fix tests and revert go-redis ([#18958](https://github.com/grafana/loki/issues/18958))
* **tools:** Correct typo in appenPath function name ([#17917](https://github.com/grafana/loki/issues/17917))
* **tsdb:** avoid copying label values from tsdb unless required ([#17077](https://github.com/grafana/loki/issues/17077)) ([8e4b104](https://github.com/grafana/loki/commit/8e4b10408dacf7891d48b70eba451a95bcf72853))
* **ui:** Fix UI build ([#17717](https://github.com/grafana/loki/issues/17717)) ([e01a2a9](https://github.com/grafana/loki/commit/e01a2a908a83006e2ecd71c1dffbf0982ec89d00))
* **ui:** downgrade UI's @swc/core dep back to v1.13.5 ([#19345](https://github.com/grafana/loki/issues/19345))
* **WAL:** Handle WAL corruption properly on startup ([#18175](https://github.com/grafana/loki/issues/18175)) ([1954f67](https://github.com/grafana/loki/commit/1954f67a50ca0dc40e77c49e2c6cc74014e5998a))

<!-- DO NOT PUBLISH in Release Notes, but will be visible in the CHANGELOG
* **dataobject:** Row reader with no stream ID predicates ([#18368](https://github.com/grafana/loki/issues/18368)) ([f66781d](https://github.com/grafana/loki/commit/f66781d426df57157f73d383dee234b989d0e69a))
* **dataobject:** Fix empty streamIDs in multi-section index objects ([#18556](https://github.com/grafana/loki/issues/18556)) ([41d93f8](https://github.com/grafana/loki/commit/41d93f8a866125fb28d76f235095762c10c3ccbb))
* **dataobject:** Add special case handling for comparing empty and nil values ([#19348](https://github.com/grafana/loki/issues/19348))
* **dataobject:** backoff cannot be canceled via ctx ([#19041](https://github.com/grafana/loki/issues/19041))
* **dataobject:** dataobj-consumers commit incorrect offset, which can cause data loss ([#18833](https://github.com/grafana/loki/issues/18833))
* **dataobject:** dataobj-consumers did not commit offsets on idle flush ([#18834](https://github.com/grafana/loki/issues/18834))
* **dataobject:** deadlock when shutting down dataobj-consumers ([#18932](https://github.com/grafana/loki/issues/18932))
* **dataobject:** don't need to open section to read tenant ([#19053](https://github.com/grafana/loki/issues/19053))
* **dataobject:** Fix context canceled stops reader from cleaning up ([#19210](https://github.com/grafana/loki/issues/19210))
* **dataobject:** Fix possible data loss in dataobj-consumers ([#19060](https://github.com/grafana/loki/issues/19060))
* **dataobject:** Metastore timerange filter ([#19171](https://github.com/grafana/loki/issues/19171))
* **dataobject:** Fix mistake in error, should have said logs section ([#18844](https://github.com/grafana/loki/issues/18844))
* **dataobject:** Fix nil error returned when client closed ([#19068](https://github.com/grafana/loki/issues/19068))
* **dataobject:** Fix panic in stats.go ([#19032](https://github.com/grafana/loki/issues/19032))
* **dataobject:** records discarded if one fetch returns error ([#19069](https://github.com/grafana/loki/issues/19069))
* **dataobject:** reset the last modified timestamp on flush ([#18916](https://github.com/grafana/loki/issues/18916))
* **engine:** Fix querier initialization ([#17228](https://github.com/grafana/loki/issues/17228)) ([fa03f81](https://github.com/grafana/loki/commit/fa03f811d0ff229374f941fa6d7245b951496b9f))
* **engine:** Stop applying limits pushdown under a filter ([#19154](https://github.com/grafana/loki/issues/19154))
* **goldfish:** register goldfish flags ([#18728](https://github.com/grafana/loki/issues/18728)) ([e06fea9](https://github.com/grafana/loki/commit/e06fea953852ed276c9bd2175326335cad7a62f6))
* **goldfish:** routing for goldfish to work with nginx ([#18578](https://github.com/grafana/loki/issues/18578)) ([2e728ce](https://github.com/grafana/loki/commit/2e728ce7ba1def6d286d431b5d69be1a872d26bd))
* **goldfish:** Goldfish context cancellation and child spans ([#18837](https://github.com/grafana/loki/issues/18837))
* **ingest-limits:** evict the limits cache once half the TTL has elapsed ([#17337](https://github.com/grafana/loki/issues/17337)) ([e6d8a22](https://github.com/grafana/loki/commit/e6d8a225ec41f6a81074545ef19ca65bdd416ed5))
* **ingest-limits:** Fix a bug where limits were incorrect after [#16937](https://github.com/grafana/loki/issues/16937) ([#17224](https://github.com/grafana/loki/issues/17224)) ([805125c](https://github.com/grafana/loki/commit/805125c70c8df52d8a1049a74bc824cae16e21ee))
* **ingest-limits:** Fix bug where expectedStreamUsageRequest was not used ([#17223](https://github.com/grafana/loki/issues/17223)) ([d106042](https://github.com/grafana/loki/commit/d106042f06cfb0924613fcde6289e39f90579b13))
* **ingest-limits:** Fix single error prevents getting assigned partitions ([#17315](https://github.com/grafana/loki/issues/17315)) ([a6846d8](https://github.com/grafana/loki/commit/a6846d808f3a9e74baee17ab3218452960c5058d))
* **ingest-limits:** Add missing Overrides module dependency ([#17625](https://github.com/grafana/loki/issues/17625)) ([d1b7038](https://github.com/grafana/loki/commit/d1b70382d15aa17c5967a013ba71ee0cdbe7906e)) 
* **ingest-limits:** Disable auto committing records ([#17409](https://github.com/grafana/loki/issues/17409)) ([434e906](https://github.com/grafana/loki/commit/434e9066605966d8d3d65c13777c7e2a5c68c1b9))
* **ingest-limits:** Fix readiness check ([#17551](https://github.com/grafana/loki/issues/17551)) ([a4e71be](https://github.com/grafana/loki/commit/a4e71be7c55252265d45e723e0d7f26d28612571))
* **ingest-limits:** Fix WAL appender constructor ([#17613](https://github.com/grafana/loki/issues/17613)) ([cdbe3b3](https://github.com/grafana/loki/commit/cdbe3b3335a6fd7970b083cbbafe6938e3a3acc7))
* **ingest-limits:** Get usage from owing instances only ([#16937](https://github.com/grafana/loki/issues/16937)) ([5229a2a](https://github.com/grafana/loki/commit/5229a2ab652ea04e6c289622c391404d722950a5))
* **ingest-limits:** Incorrect ingested bytes counter usage ([#17037](https://github.com/grafana/loki/issues/17037)) ([406690d](https://github.com/grafana/loki/commit/406690d26e7397fdb59dfebcc76fd9415eb2456e))
* **ingest-limits:** Query all assigned partitions ([#17473](https://github.com/grafana/loki/issues/17473)) ([0afb56d](https://github.com/grafana/loki/commit/0afb56d193f148ce5374690fa23fc6bd2d21a39f))
* **ingest-limits:** Use stripe locking for metadata ([#17150](https://github.com/grafana/loki/issues/17150)) ([c32e479](https://github.com/grafana/loki/commit/c32e479dd220ae10150ae07ceb3aa7b228940afc))
* **ingest-limits:** lint error in main branch ([#17594](https://github.com/grafana/loki/issues/17594)) ([93eaf5f](https://github.com/grafana/loki/commit/93eaf5f4381006edb675122ef964b59a8e59f1e2)) 
 -->
