---
name: Append to Release Notes
on:
  pull_request_target:
    types:
      - closed
      - labeled

jobs:
  main:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Actions
        uses: actions/checkout@v3.3.0
        with:
          repository: "trevorwhitney/grafana-github-actions"
          path: ./actions
          ref: 01725b6aaaca42e31776a5d35d26a110346b4a15
      - name: Install Actions
        run: npm install --production --prefix ./actions
      - name: Run release notes appender
        uses: ./actions/release-notes-appender
        with:
          metricsWriteAPIKey: ${{secrets.GRAFANA_MISC_STATS_API_KEY}}
          token: ${{secrets.GH_BOT_ACCESS_TOKEN}}
          labelsToAdd: "release-notes"
          title: "[{{base}}] {{originalTitle}}"
          releaseNotesFile: docs/sources/release-notes/v2-8.md
