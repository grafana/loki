from netaddr import IPSet

from mmdb_writer import MMDBWriter

# MMDBWriter: https://github.com/vimt/MaxMind-DB-Writer-python

writer = MMDBWriter(database_type='GeoLite2-ASN', description='Test database')
writer.insert_network(
    IPSet(['192.0.2.0/24']),
    {
        'autonomous_system_number': 1337, 'autonomous_system_organization': 'Just a Test',
    },
)
writer.to_db_file('geoip_maxmind_asn.mmdb')

writer = MMDBWriter(database_type='GeoIP2-Country', description='Test database')
writer.insert_network(
    IPSet(['192.0.2.0/24']),
    {
        'continent': {'code': 'NA', 'geoname_id': 6255149, 'names': {'de': 'Nordamerika', 'en': 'North America', 'es': 'Norteamérica', 'fr': 'Amérique du Nord', 'ja': '北アメリカ', 'pt-BR': 'América do Norte', 'ru': 'Северная Америк', 'zh-CN': '北美洲'}},
        'country': {'geoname_id': 6252001, 'is_in_european_union': False, 'iso_code': 'US', 'names': {'de': 'Vereinigte Staaten', 'en': 'United States', 'es': 'Estados Unidos', 'fr': 'États Unis', 'ja': 'アメリカ', 'pt-BR': 'EUA', 'ru': 'США', 'zh-CN': '美国'}},
        'registered_country': {'geoname_id': 6252001, 'is_in_european_union': False, 'iso_code': 'US', 'names': {'de': 'Vereinigte Staaten', 'en': 'United States', 'es': 'Estados Unidos', 'fr': 'États Unis', 'ja': 'アメリカ', 'pt-BR': 'EUA', 'ru': 'США', 'zh-CN': '美国'}},
        'traits': {'is_anonymous_proxy': True, 'is_satellite_provider': True, 'is_anycast': True},
    },

)
writer.to_db_file('geoip_maxmind_country.mmdb')

writer = MMDBWriter(database_type='GeoIP2-City', description='Test database')
writer.insert_network(
    IPSet(['192.0.2.0/24']),
    {
        'continent': {'code': 'EU', 'geoname_id': 6255148,  'names': {'de': 'Europa', 'en': 'Europe', 'es': 'Europa', 'fr':  'Europe', 'ja': 'ヨーロッパ', 'pt-BR': 'Europa', 'ru': 'Европа', 'zh-CN': '欧洲'}},
        'country': {'geoname_id': 2635167, 'is_in_european_union': False, 'iso_code': 'GB', 'names': {'de': 'Vereinigtes Königreich', 'en': 'United Kingdom', 'es': 'Reino Unido', 'fr': 'Royaume-Uni', 'ja': 'イギリス', 'pt-BR': 'Reino Unido', 'ru': 'Великобритания', 'zh-CN': '英国'}},
        'registered_country': {'geoname_id': 6252001, 'is_in_european_union': False, 'iso_code': 'US', 'names': {'de': 'USA', 'en': 'United States', 'es': 'Estados Unidos', 'fr': 'États-Unis', 'ja': 'アメリカ合衆国', 'pt-BR': 'Estados Unidos', 'ru': 'США', 'zh-CN': '美国'}},
        'traits': {'is_anonymous_proxy': True, 'is_satellite_provider': True, 'is_anycast': True},
        'location': {'accuracy_radius': 100, 'latitude': 51.5142, 'longitude': -0.0931, 'time_zone': 'Europe/London'}, 'postal': {'code': 'OX1'}, 'city': {'geoname_id': 2643743, 'names': {'de': 'London', 'en': 'London', 'es': 'Londres', 'fr': 'Londres', 'ja': 'ロンドン', 'pt-BR': 'Londres', 'ru': 'Лондон'}},
        'subdivisions': [{'geoname_id': 6269131, 'iso_code': 'ENG', 'names': {'en': 'England', 'es': 'Inglaterra', 'fr': 'Angleterre', 'pt-BR': 'Inglaterra'}}],
    },
)
writer.to_db_file('geoip_maxmind_city.mmdb')
